<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script src="main.js"></script>
</head>
<body>
    <img id="photo" src="http://''''"></img>
</body>
<script>
    // 原生 load 
    // 1、IE8及以下版本不支持onload事件，但支持onreadystatechange事件；
    // 2、readyState是onreadystatechange事件的一个状态，值为loaded或complete的时候，表示已经加载完毕
    var oImg = document.getElementById('photo');
    oImg.onload = oImg.onreadystatechange = function() {
        if(!this.readyState || this.readyState=='loaded' || this.readyState=='complete'){
            
        }
    }

    // 动态生成图片
    var oImg1 = new Image();
    oImg1.src = 'http://....';
    oImg1.onLoad = function() {

    }

    // 单张图片结合 ES6 promise
    new Promise((resolve, reject) => {
        var oImg2 = new Image();
        oImg2.src = 'http://....';
        oImg2.onload = function() {
            resolve(oImg2);
        }
        
    })
        .then(img => {
            console.log('图片加载完成；', img);
            
        })

    // 多张图片
    var img = [],
        flag = 0,
        mulitImg = [
            'http://...01.jpg',
            'http://...02.jpg',
            'http://...03.jpg',
            'http://...04.jpg'
        ]
        var imgTotal = nulitImg.length;
        for(var i = 0; i < imgTotal; i++) {
            img[i] = new Image();
            img[i].src = nulitImg[i];
            img[i].onload = function() {
                flag++;
                if(flag === imgTotal) {
                    // 全部加载完成。
                }
            }
        }

    // 多张图片配合 ES6
    let mulitImgs = [
            'http://...01.jpg',
            'http://...02.jpg',
            'http://...03.jpg',
            'http://...04.jpg'
        ]
    let promiseAll = [], 
        img = [],
        imgTotal = mulitImgs.length;
    for(let i = 0; i < imgTotal; i++) {
        promiseAll[i] = new Promise((resolve, reject) => {
            img[i] = new Image();
            img[i].src = mulitImgs[i];
            img[i].onload = function() {
                resolve(img[i]);
            }
        })
    }
    Promise.all(promiseAll).then((img) => {
        console.log('全部加载完成：', img);
        
    })

    
</script>
</html>